(function(e){function n(n){for(var o,s,a=n[0],c=n[1],l=n[2],d=0,f=[];d<a.length;d++)s=a[d],i[s]&&f.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(n);while(f.length)f.shift()();return r.push.apply(r,l||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],o=!0,a=1;a<t.length;a++){var c=t[a];0!==i[c]&&(o=!1)}o&&(r.splice(n--,1),e=s(s.s=t[0]))}return e}var o={},i={app:0},r=[];function s(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=o,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)s.d(t,o,function(n){return e[n]}.bind(null,o));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="/battleslides-image/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=n,a=a.slice();for(var l=0;l<a.length;l++)n(a[l]);var u=c;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";var o=t("64a9"),i=t.n(o);i.a},"3be4":function(e,n,t){"use strict";var o=t("74d6"),i=t.n(o);i.a},"428c":function(e,n,t){e.exports=t.p+"img/logo_white.5bcad81a.png"},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var o,i=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("FileTransfer")],1)},s=[],a=function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"file-transfer"},[o("img",{staticClass:"logo",attrs:{src:t("428c")}}),o("h2",[e._v("Add an Image or Video")]),o("p",[e._v("Want to add some crazy to someone's presentation? Take or find a photo or short video, and it will be uploaded to your game session.")]),o("p",[e._v('Note: These files DO NOT get uploaded to the "cloud". They go straight to your party\'s machine, and disappear as soon as the game is turned off.')]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.fileProgress>0,expression:"fileProgress > 0"}],staticClass:"progres-container"},[o("progress-bar",{attrs:{options:e.progressOptions,value:e.fileProgress}})],1),o("br"),o("input",{directives:[{name:"show",rawName:"v-show",value:!e.joined,expression:"!joined"}],staticClass:"input is-large",attrs:{type:"text",id:"room-num",onkeypress:"return /[a-z]/i.test(event.key)"}}),o("a",{directives:[{name:"show",rawName:"v-show",value:!e.joined,expression:"!joined"}],staticClass:"btn-select-file button",attrs:{id:"btn-join-game"}},[e._v("Join game")]),o("a",{directives:[{name:"show",rawName:"v-show",value:e.joined,expression:"joined"}],staticClass:"btn-select-file button is-danger",attrs:{id:"btn-select-file"}},[e._v("Find a file")])])},c=[];t("7f7f"),t("a481"),t("5df3"),t("1c4c"),t("ac6a");function l(){var e=this,n=function(){};function t(t,i,r){t=t||function(){};var s=document.createElement("input");s.type="file",i&&(s.multiple=!0),r&&(s.webkitdirectory=!0),s.accept=e.accept,s.onclick=function(){s.clickStarted=!0},document.body.onfocus=function(){setTimeout(function(){s.clickStarted&&(s.clickStarted=!1,s.value||n())},500)},s.onchange=function(){if(i){if(!s.files.length)return void console.error("No file selected.");var e=[];return Array.from(s.files).forEach(function(n){n.url=n.webkitRelativePath,e.push(n)}),void t(e)}s.files[0]?(t(s.files[0]),s.parentNode.removeChild(s)):console.error("No file selected.")},s.style.display="none",(document.body||document.documentElement).appendChild(s),o(s)}function o(e){if("function"!==typeof e.click)if("function"!==typeof e.change){if("undefined"!==typeof document.createEvent("Event")){var n=document.createEvent("Event");if("function"===typeof n.initEvent&&"function"===typeof e.dispatchEvent)return n.initEvent("click",!0,!0),void e.dispatchEvent(n)}n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(n)}else e.change();else e.click()}e.selectSingleFile=function(e,o){o&&(n=o),t(e)},e.selectMultipleFiles=function(e,o){o&&(n=o),t(e,!0)},e.selectDirectory=function(e,o){o&&(n=o),t(e,!0,!0)},e.accept="*.*"}var u={name:"title-screen",data:function(){return{joined:!1,progressOptions:{text:{color:"#ffffff",shadowEnable:!0,shadowColor:"#000000",fontSize:14,fontFamily:"Segoe UI",dynamicPosition:!1,hideText:!1},progress:{color:"#00d1b2",backgroundColor:"#000000"},layout:{height:35,width:140,verticalTextAlign:61,horizontalTextAlign:43,zeroOffset:0,strokeWidth:30,progressPadding:0,type:"line"}},fileProgress:0}},mounted:function(){o=this,window.getExternalIceServers=!0;var e=document.getElementById("btn-join-game");e.onclick=function(){var e=document.getElementById("room-num").value;r(e.toUpperCase())},window.onerror=console.error=function(){var e=JSON.stringify(arguments);-1===e.indexOf("Blocked a frame with origin")&&alert("Error:\n"+e)};var n,i=document.getElementById("btn-select-file");function r(e){s("battleslides-".concat(e))}function s(e){var r;o.joined=!0,i.onclick=function(e){if(e&&(e instanceof File||e instanceof Blob)&&e.size)f(e);else{var n=new l;n.selectSingleFile(function(e){f(e)})}};var s="",a=6e4;function c(){if(!n){var o=t("cd68");t("978b");n=new o,n.fileReceived={},n.socketURL="https://rtcmulticonnection.herokuapp.com:443/",n.socketMessageEvent="file-sharing-demo",n.chunkSize=a,n.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},n.enableFileSharing=!0,s&&s.length&&(n.userid=s),n.channel=n.sessionid=e,n.session={data:!0,oneway:!1},n.iceServers=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}],n.connectedWith={},n.onmessage=function(e){e.data.doYouWannaReceiveThisFile&&(n.fileReceived[e.data.fileName]||n.send({yesIWannaReceive:!1,fileName:e.data.fileName})),e.data.yesIWannaReceive&&r&&n.shareFile(r,e.userid)},n.onopen=function(e){try{chrome.power.requestKeepAwake("display")}catch(e){}if(!n.connectedWith[e.userid]){n.connectedWith[e.userid]=!0;var t="<b>"+e.userid+"</b><br>is connected.";if(console.log(t),r){var o=r;setTimeout(function(){console.log("Sharing file<br><b>"+o.name+"</b><br>Size: <b>"+d(o.size)+"<b><br>With <b>"+n.getAllParticipants().length+"</b> users"),n.send({doYouWannaReceiveThisFile:!0,fileName:o.size+o.name})},500)}}},n.onclose=function(t){n.connectedWith[t.userid]||(console.log("Data connection has been closed between you and <b>"+t.userid+"</b>. Re-Connecting.."),n.join(e))},n.onerror=function(e){n.connectedWith[e.userid]||console.log("Data connection failed. between you and <b>"+e.userid+"</b>. Retrying..")},u(n),n.onUserStatusChanged=function(e){},n.onleave=function(e){e.status="offline",n.onUserStatusChanged(e)};var i="Connecting room:<br><b>"+n.channel+"</b>";console.log(i),n.openOrJoin(n.channel,function(e,t){var o="Successfully connected to room: <b>"+t+'</b><hr>Other users can join you on iPhone/Android using "'+t+'" or desktop (Windows/MacOSX/Ubuntu) users can join using this (secure/private) URL: <a href="./file-sharing.html#'+t+'" target="_blank">file-sharing.html#'+t+"</a>";console.log(o),n.getSocket(function(e){e.on("disconnect",function(){console.log("Seems disconnected.","red")}),e.on("connect",function(){location.reload()}),e.on("error",function(){location.reload()})}),window.addEventListener("offline",function(){console.log("Seems disconnected.","red")},!1)}),window.connection=n}}function u(e){e.onFileStart=function(n){e.fileReceived[n.size+n.name]||(n.userid,e.userid,n.remoteUserId)},e.onFileProgress=function(n){e.fileReceived[n.size+n.name]||(o.fileProgress=Math.round(n.currentPosition/n.maxChunks*100),o.fileProgress=o.fileProgress>100?100:o.fileProgress,console.log(JSON.stringify(Math.round(n.currentPosition/n.maxChunks))))},e.onFileEnd=function(n){if(!e.fileReceived[n.size+n.name]){var t="Successfully shared file";t+="<br><b>"+n.name+"</b>.",t+="<br>With: <b>"+n.remoteUserId+"</b>.",t+="<br>Size: <b>"+d(n.size)+"</b>.",console.log(t)}}}function d(e){var n=1e3,t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Bytes";var o=parseInt(Math.floor(Math.log(e)/Math.log(n)),10);return(e/Math.pow(n,o)).toPrecision(3)+" "+t[o]}function f(e){var t="You selected:<br><b>"+e.name+"</b><br>Size: <b>"+d(e.size)+"</b>";console.log(t),r=e,n&&n.send({doYouWannaReceiveThisFile:!0,fileName:e.size+e.name})}window.onerror=console.error=function(){var e=JSON.stringify(arguments);-1===e.indexOf("Blocked a frame with origin")&&console.log("Error:<br>"+e,"red")},c()}window.addEventListener("online",function(){location.reload()},!1),document.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},!1),document.addEventListener("drop",function(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length){var t=e.dataTransfer.files[0];n||document.getElementById("join-room").onclick(),i.onclick(t)}},!1)},methods:{}},d=u,f=(t("3be4"),t("2877")),p=Object(f["a"])(d,a,c,!1,null,null,null),g=p.exports,v={name:"app",components:{FileTransfer:g}},h=v,m=(t("034f"),Object(f["a"])(h,r,s,!1,null,null,null)),b=m.exports,y=t("527e"),w=t.n(y);i["default"].config.productionTip=!1,new i["default"]({render:function(e){return e(b)}}).$mount("#app"),i["default"].use(w.a)},"64a9":function(e,n,t){},"74d6":function(e,n,t){}});
//# sourceMappingURL=app.f5cb5256.js.map